# コントリビュートの流れ

開発は、[一般的な OSS コントリビューション](https://note.com/samurai_se/n/ncde3bb14066e?magazine_key=md5321f66534d)と同じ流れで行います。
コントリビュートに際しての大まかな流れは以下の通りです。

## 1. このリポジトリをフォークします。

github の"Fork"から、自身のリポジトリに本家リポジトリを Fork してください。

## 2. 自分のリポジトリにフォークしたリポジトリをローカルにクローンします。

この作業は、誤ってオリジナルブランチへ push したりするのを防ぐために行います。

```
git clone https://github.com/<あなたのユーザー名>/ixy-portfolio.git
```

## 3. 本家リポジトリの URL を Upstream として登録します。

```
git remote add upstream https://github.com/Ixy194194/ixy194194.github.io.git
```

## 4. リポジトリのディレクトリに移動し、依存関係をインストールします。

```
cd ixy-portfolio
npm install
```

## 5. 開発サーバーを起動します。

```
npm run dev
# or
yarn dev
```

ブラウザで`http://localhost:3000`にアクセスすると、ウェブサイトが表示されます。**.tsx ファイル**を編集すると、ページが自動で更新されます。

ページを確認できたら、環境構築は完了です。

## 6. dev ブランチをベースに開発用ブランチを切ります。

```
git branch <任意の名前(基本的にはissue番号)>
```

## 7. 開発を進めていきます

開発を進めるにあたって、必ずテストコードも書いてコミット・push までしてください。
既存のコードに新たな処理を追加した場合は、必ずテストコードも追加してください。
新規でコードを作成した場合はいわずもがなテストコードも作成してください。

また、コミットを行う際には適切なプレフィックスをつけたコミットメッセージを書いてください。
コミットメッセージの書き方は[こちら](https://qiita.com/konatsu_p/items/dfe199ebe3a7d2010b3e)を参考にしてください。

## 8. 開発が終わったら(できれば開発途中でも)、ローカルでテストコードを実行します

以下のコマンドを実行して、テストコードがエラーにならないかを確認してください。
テスト駆動で開発を進めることが望ましいです。

また、コンポーネントを修正・追加した場合はテストコードも修正・追加してください。
**test**フォルダにあるのがテストコードです。

テストコードはプルリクを出した場合にも実行されます。
**そこでエラーがでないようにしてください。**

```
npm run test
または
npm run test:ci
```

npm run test を実行した場合、ウォッチモードで実行されるためファイルを保存すると自動でユニットテストが実行されます。
npm run test:ci を実行した場合、一度だけテストコードが実行されます。

## 9. プルリクを送る

プルリクのマージ先ブランチに**dev**を選択してください。
先に issue を出していた場合は、プルリクのタイトルは「#issue 番号 issue 名」の形にしてください。
issue を出していない場合、プルリクのタイトルは修正内容が分かる内容にしてください。

## 10. プルリクがマージされたら、自身のリポジトリに最新のソースを反映します。

オリジナルの dev への変更を自身のローカルの dev ブランチへ取り込み、自身のリモートリポジトリの dev ブランチへ反映させて、ソースを最新化します。

```
git checkout dev
git fetch upstream
git merge upstream/dev --ff-only
git push origin dev -u
```

さらに開発を行う場合は、手順 6 へ戻ります。
